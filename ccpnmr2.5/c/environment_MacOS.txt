# PYTHON_DIR WILL INSERT HERE
# CONDA_ENV WILL INSERT HERE

# should work if suitably edited for Linux, Irix, Solaris, OSX, Windows

# general rules:
# *_LIB = required library or libraries (use -l or equivalen)
# *_INCLUDE_FLAGS = where to find include files (use -I)
# *_LIB_FLAGS = where to find libraries (use -L)

# the C compiler and associated things

# use below for everything except Windows
CC = cc -m64
LINK = $(CC)
MAKE = make
CO_NAME = -c $<
OUT_NAME = -o $@
OBJ_SUFFIX = o
DYLIB_SUFFIX = so
RM = rm -f

# use for arm64 (m1)
#CC = gcc -arch arm64

# use below for everything without malloc.h (e.g. OSX)
MALLOC_FLAG = -DDO_NOT_HAVE_MALLOC

# use below for everything with -fPIC option (e.g. gcc)
FPIC_FLAG = -fPIC

# disable warning messages flag
NOWARNING_FLAG = -w

# use below for everything where Tk xor behaves normally
XOR_FLAG =

# optimisation flag
# use below for everything except Windows
OPT_FLAG = -O2

# linking command for C libraries into Python world
# (used for everything except Windows)
LINK_LIBRARIES = sh linkSharedObjs

# Clean .so files from python path
# (used for everything except Windows)
CLEAN_SO = rm -f *.so

# use below if you want to ignore GL
#IGNORE_GL_FLAG = -DIGNORE_GL

GL_FLAG = -DUSE_GL_TRUE

#GLUT_NEED_INIT = -DNEED_GLUT_INIT
#GLUT_NOT_IN_GL = -DGLUT_IN_OWN_DIR
GLUT_FLAG = $(GLUT_NEED_INIT) $(GLUT_NOT_IN_GL)

# math
MATH_LIB = -lm

TK_LIB = $(PYTHON_DIR)/lib/libtk8.6.dylib
GL_LIB = /usr/local/Cellar/mesa/20.3.4/lib/libGL.1.dylib /usr/local/Cellar/freeglut/3.2.1_1/lib/libglut.3.11.0.dylib
X11_LIB = /usr/local/Cellar/libx11/1.7.0/lib/libX11.6.dylib

CC_FLAGS = $(WIN_FLAG) $(OPT_FLAG) $(FPIC_FLAG) $(MALLOC_FLAG) $(XOR_FLAG) $(NOWARNING_FLAG)
LINK_FLAGS = $(WIN_FLAG) $(OPT_FLAG) $(FPIC_FLAG)

# rest of Python
PYTHON_VERSION = 2.7
PYTHON_LIB = $(PYTHON_DIR)/lib/libpython2.7.dylib
PYTHON_INCLUDE_FLAGS = -I$(PYTHON_DIR)/include/python$(PYTHON_VERSION) -I$(PYTHON_DIR)/lib/python$(PYTHON_VERSION)/site-packages/numpy/core/include/numpy

# use below for OSX
SHARED_FLAGS = -L$(PYTHON_DIR)/lib -bundle -bundle_loader $(PYTHON_DIR)/bin/python
